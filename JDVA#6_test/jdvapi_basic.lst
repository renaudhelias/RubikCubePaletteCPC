                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.0 #9615 (MINGW32)
                              4 ;--------------------------------------------------------
                              5 	.module jdvapi_basic
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _put_pixel_byte1
                             12 	.globl _put_pixel1
                             13 	.globl _set_pixel_color1
                             14 	.globl _copy_pixel0bytes
                             15 	.globl _put_pixel0
                             16 	.globl _set_pixel_color0
                             17 	.globl _line
                             18 	.globl _move
                             19 	.globl _plot
                             20 	.globl _mode
                             21 	.globl _set_palette
                             22 	.globl _border
                             23 	.globl _set_color
                             24 	.globl _locate
                             25 	.globl _pen
                             26 ;--------------------------------------------------------
                             27 ; special function registers
                             28 ;--------------------------------------------------------
                             29 ;--------------------------------------------------------
                             30 ; ram data
                             31 ;--------------------------------------------------------
                             32 	.area _DATA
                             33 ;--------------------------------------------------------
                             34 ; ram data
                             35 ;--------------------------------------------------------
                             36 	.area _INITIALIZED
                             37 ;--------------------------------------------------------
                             38 ; absolute external ram data
                             39 ;--------------------------------------------------------
                             40 	.area _DABS (ABS)
                             41 ;--------------------------------------------------------
                             42 ; global & static initialisations
                             43 ;--------------------------------------------------------
                             44 	.area _HOME
                             45 	.area _GSINIT
                             46 	.area _GSFINAL
                             47 	.area _GSINIT
                             48 ;--------------------------------------------------------
                             49 ; Home
                             50 ;--------------------------------------------------------
                             51 	.area _HOME
                             52 	.area _HOME
                             53 ;--------------------------------------------------------
                             54 ; code
                             55 ;--------------------------------------------------------
                             56 	.area _CODE
                             57 ;jdvapi_basic.c:3: void pen(unsigned char p)
                             58 ;	---------------------------------
                             59 ; Function pen
                             60 ; ---------------------------------
   0000                      61 _pen::
   0000 DD E5         [15]   62 	push	ix
   0002 DD 21 00 00   [14]   63 	ld	ix,#0
   0006 DD 39         [15]   64 	add	ix,sp
                             65 ;jdvapi_basic.c:8: __endasm;
   0008 DD 7E 04      [19]   66 	ld	A,4 (IX)
   000B CD DE BB      [17]   67 	call	#0xBBDE
   000E DD E1         [14]   68 	pop	ix
   0010 C9            [10]   69 	ret
                             70 ;jdvapi_basic.c:11: void locate(unsigned char x,unsigned char y)
                             71 ;	---------------------------------
                             72 ; Function locate
                             73 ; ---------------------------------
   0011                      74 _locate::
   0011 DD E5         [15]   75 	push	ix
   0013 DD 21 00 00   [14]   76 	ld	ix,#0
   0017 DD 39         [15]   77 	add	ix,sp
                             78 ;jdvapi_basic.c:18: __endasm;
   0019 DD 7E 04      [19]   79 	ld	A,4 (IX)
   001C CD 6F BB      [17]   80 	call	#0xBB6F
   001F DD 7E 05      [19]   81 	ld	A,5 (IX)
   0022 CD 72 BB      [17]   82 	call	#0xBB72
   0025 DD E1         [14]   83 	pop	ix
   0027 C9            [10]   84 	ret
                             85 ;jdvapi_basic.c:21: void set_color(unsigned char nColorIndex, unsigned char nPaletteIndex)
                             86 ;	---------------------------------
                             87 ; Function set_color
                             88 ; ---------------------------------
   0028                      89 _set_color::
   0028 DD E5         [15]   90 	push	ix
   002A DD 21 00 00   [14]   91 	ld	ix,#0
   002E DD 39         [15]   92 	add	ix,sp
                             93 ;jdvapi_basic.c:28: __endasm;
   0030 DD 7E 04      [19]   94 	ld	a, 4 (ix)
   0033 DD 46 05      [19]   95 	ld	b, 5 (ix)
   0036 48            [ 4]   96 	ld	c, b
   0037 CD 32 BC      [17]   97 	call	#0xBC32 ;SCR SET INK
   003A DD E1         [14]   98 	pop	ix
   003C C9            [10]   99 	ret
                            100 ;jdvapi_basic.c:31: void border(unsigned char nColorIndex)
                            101 ;	---------------------------------
                            102 ; Function border
                            103 ; ---------------------------------
   003D                     104 _border::
   003D DD E5         [15]  105 	push	ix
   003F DD 21 00 00   [14]  106 	ld	ix,#0
   0043 DD 39         [15]  107 	add	ix,sp
                            108 ;jdvapi_basic.c:37: __endasm;
   0045 DD 46 04      [19]  109 	ld	b, 4 (ix)
   0048 48            [ 4]  110 	ld	c, b
   0049 CD 38 BC      [17]  111 	call	#0xBC38 ;SCR SET INK
   004C DD E1         [14]  112 	pop	ix
   004E C9            [10]  113 	ret
                            114 ;jdvapi_basic.c:40: void set_palette(unsigned char *pPalette)
                            115 ;	---------------------------------
                            116 ; Function set_palette
                            117 ; ---------------------------------
   004F                     118 _set_palette::
   004F DD E5         [15]  119 	push	ix
   0051 DD 21 00 00   [14]  120 	ld	ix,#0
   0055 DD 39         [15]  121 	add	ix,sp
                            122 ;jdvapi_basic.c:44: for(nColor = 0; nColor < 16; nColor++)
   0057 0E 00         [ 7]  123 	ld	c,#0x00
   0059                     124 00102$:
                            125 ;jdvapi_basic.c:45: set_color(nColor, pPalette[nColor]);
   0059 DD 7E 04      [19]  126 	ld	a,4 (ix)
   005C 81            [ 4]  127 	add	a, c
   005D 5F            [ 4]  128 	ld	e,a
   005E DD 7E 05      [19]  129 	ld	a,5 (ix)
   0061 CE 00         [ 7]  130 	adc	a, #0x00
   0063 57            [ 4]  131 	ld	d,a
   0064 1A            [ 7]  132 	ld	a,(de)
   0065 6F            [ 4]  133 	ld	l,a
   0066 C5            [11]  134 	push	bc
   0067 7D            [ 4]  135 	ld	a,l
   0068 F5            [11]  136 	push	af
   0069 33            [ 6]  137 	inc	sp
   006A 79            [ 4]  138 	ld	a,c
   006B F5            [11]  139 	push	af
   006C 33            [ 6]  140 	inc	sp
   006D CDr28r00      [17]  141 	call	_set_color
   0070 F1            [10]  142 	pop	af
   0071 C1            [10]  143 	pop	bc
                            144 ;jdvapi_basic.c:44: for(nColor = 0; nColor < 16; nColor++)
   0072 0C            [ 4]  145 	inc	c
   0073 79            [ 4]  146 	ld	a,c
   0074 D6 10         [ 7]  147 	sub	a, #0x10
   0076 38 E1         [12]  148 	jr	C,00102$
   0078 DD E1         [14]  149 	pop	ix
   007A C9            [10]  150 	ret
                            151 ;jdvapi_basic.c:53: void mode(unsigned char m)
                            152 ;	---------------------------------
                            153 ; Function mode
                            154 ; ---------------------------------
   007B                     155 _mode::
   007B DD E5         [15]  156 	push	ix
   007D DD 21 00 00   [14]  157 	ld	ix,#0
   0081 DD 39         [15]  158 	add	ix,sp
                            159 ;jdvapi_basic.c:58: __endasm;
   0083 DD 7E 04      [19]  160 	ld	A,4 (IX)
   0086 CD 0E BC      [17]  161 	call	#0xBC0E
   0089 DD E1         [14]  162 	pop	ix
   008B C9            [10]  163 	ret
                            164 ;jdvapi_basic.c:65: void plot(unsigned int x,unsigned int y)
                            165 ;	---------------------------------
                            166 ; Function plot
                            167 ; ---------------------------------
   008C                     168 _plot::
   008C DD E5         [15]  169 	push	ix
   008E DD 21 00 00   [14]  170 	ld	ix,#0
   0092 DD 39         [15]  171 	add	ix,sp
                            172 ;jdvapi_basic.c:75: __endasm;
   0094 DD 5E 04      [19]  173 	ld	E,4 (IX)
   0097 DD 56 05      [19]  174 	ld	D,5 (IX)
   009A DD 6E 06      [19]  175 	ld	L,6 (IX)
   009D DD 66 07      [19]  176 	ld	H,7 (IX)
   00A0 CD EA BB      [17]  177 	call	#0xBBEA
   00A3 DD E1         [14]  178 	pop	ix
   00A5 C9            [10]  179 	ret
                            180 ;jdvapi_basic.c:78: void move(unsigned int x,unsigned int y)
                            181 ;	---------------------------------
                            182 ; Function move
                            183 ; ---------------------------------
   00A6                     184 _move::
   00A6 DD E5         [15]  185 	push	ix
   00A8 DD 21 00 00   [14]  186 	ld	ix,#0
   00AC DD 39         [15]  187 	add	ix,sp
                            188 ;jdvapi_basic.c:88: __endasm;
   00AE DD 5E 04      [19]  189 	ld	E,4 (IX)
   00B1 DD 56 05      [19]  190 	ld	D,5 (IX)
   00B4 DD 6E 06      [19]  191 	ld	L,6 (IX)
   00B7 DD 66 07      [19]  192 	ld	H,7 (IX)
   00BA CD C0 BB      [17]  193 	call	#0xBBC0
   00BD DD E1         [14]  194 	pop	ix
   00BF C9            [10]  195 	ret
                            196 ;jdvapi_basic.c:91: void line(unsigned int x,unsigned int y)
                            197 ;	---------------------------------
                            198 ; Function line
                            199 ; ---------------------------------
   00C0                     200 _line::
   00C0 DD E5         [15]  201 	push	ix
   00C2 DD 21 00 00   [14]  202 	ld	ix,#0
   00C6 DD 39         [15]  203 	add	ix,sp
                            204 ;jdvapi_basic.c:101: __endasm;
   00C8 DD 5E 04      [19]  205 	ld	E,4 (IX)
   00CB DD 56 05      [19]  206 	ld	D,5 (IX)
   00CE DD 6E 06      [19]  207 	ld	L,6 (IX)
   00D1 DD 66 07      [19]  208 	ld	H,7 (IX)
   00D4 CD F6 BB      [17]  209 	call	#0xBBF6
   00D7 DD E1         [14]  210 	pop	ix
   00D9 C9            [10]  211 	ret
                            212 ;jdvapi_basic.c:127: void set_pixel_color0(unsigned char *pByteAddress, unsigned char nColor, unsigned char nPixel)
                            213 ;	---------------------------------
                            214 ; Function set_pixel_color0
                            215 ; ---------------------------------
   00DA                     216 _set_pixel_color0::
   00DA DD E5         [15]  217 	push	ix
   00DC DD 21 00 00   [14]  218 	ld	ix,#0
   00E0 DD 39         [15]  219 	add	ix,sp
   00E2 F5            [11]  220 	push	af
                            221 ;jdvapi_basic.c:129: unsigned char nByte = *pByteAddress;
   00E3 DD 6E 04      [19]  222 	ld	l,4 (ix)
   00E6 DD 66 05      [19]  223 	ld	h,5 (ix)
   00E9 7E            [ 7]  224 	ld	a,(hl)
   00EA DD 77 FE      [19]  225 	ld	-2 (ix),a
                            226 ;jdvapi_basic.c:145: if (nColor & 1) nByte |=128;
   00ED DD 7E 06      [19]  227 	ld	a,6 (ix)
   00F0 E6 01         [ 7]  228 	and	a, #0x01
   00F2 47            [ 4]  229 	ld	b,a
                            230 ;jdvapi_basic.c:146: if (nColor & 2) nByte |=8;
   00F3 DD 7E 06      [19]  231 	ld	a,6 (ix)
   00F6 E6 02         [ 7]  232 	and	a, #0x02
   00F8 5F            [ 4]  233 	ld	e,a
                            234 ;jdvapi_basic.c:147: if (nColor & 4) nByte |=32;
   00F9 DD 7E 06      [19]  235 	ld	a,6 (ix)
   00FC E6 04         [ 7]  236 	and	a, #0x04
   00FE 57            [ 4]  237 	ld	d,a
                            238 ;jdvapi_basic.c:148: if (nColor & 8) nByte |=2;
   00FF DD 7E 06      [19]  239 	ld	a,6 (ix)
   0102 E6 08         [ 7]  240 	and	a, #0x08
   0104 DD 77 FF      [19]  241 	ld	-1 (ix),a
                            242 ;jdvapi_basic.c:130: if (nPixel == 0) {
   0107 DD 7E 07      [19]  243 	ld	a,7 (ix)
   010A B7            [ 4]  244 	or	a, a
   010B 20 22         [12]  245 	jr	NZ,00118$
                            246 ;jdvapi_basic.c:131: nByte&=85; // nByte = nByte & 85
   010D DD 7E FE      [19]  247 	ld	a,-2 (ix)
   0110 E6 55         [ 7]  248 	and	a, #0x55
   0112 4F            [ 4]  249 	ld	c,a
                            250 ;jdvapi_basic.c:145: if (nColor & 1) nByte |=128;
   0113 78            [ 4]  251 	ld	a,b
   0114 B7            [ 4]  252 	or	a, a
   0115 28 02         [12]  253 	jr	Z,00102$
   0117 CB F9         [ 8]  254 	set	7, c
   0119                     255 00102$:
                            256 ;jdvapi_basic.c:146: if (nColor & 2) nByte |=8;
   0119 7B            [ 4]  257 	ld	a,e
   011A B7            [ 4]  258 	or	a, a
   011B 28 02         [12]  259 	jr	Z,00104$
   011D CB D9         [ 8]  260 	set	3, c
   011F                     261 00104$:
                            262 ;jdvapi_basic.c:147: if (nColor & 4) nByte |=32;
   011F 7A            [ 4]  263 	ld	a,d
   0120 B7            [ 4]  264 	or	a, a
   0121 28 02         [12]  265 	jr	Z,00106$
   0123 CB E9         [ 8]  266 	set	5, c
   0125                     267 00106$:
                            268 ;jdvapi_basic.c:148: if (nColor & 8) nByte |=2;
   0125 DD 7E FF      [19]  269 	ld	a,-1 (ix)
   0128 B7            [ 4]  270 	or	a, a
   0129 28 24         [12]  271 	jr	Z,00119$
   012B CB C9         [ 8]  272 	set	1, c
   012D 18 20         [12]  273 	jr	00119$
   012F                     274 00118$:
                            275 ;jdvapi_basic.c:150: nByte&=170;
   012F DD 7E FE      [19]  276 	ld	a,-2 (ix)
   0132 E6 AA         [ 7]  277 	and	a, #0xaa
   0134 4F            [ 4]  278 	ld	c,a
                            279 ;jdvapi_basic.c:151: if (nColor & 1) nByte |=64;
   0135 78            [ 4]  280 	ld	a,b
   0136 B7            [ 4]  281 	or	a, a
   0137 28 02         [12]  282 	jr	Z,00110$
   0139 CB F1         [ 8]  283 	set	6, c
   013B                     284 00110$:
                            285 ;jdvapi_basic.c:152: if (nColor & 2) nByte |=4;
   013B 7B            [ 4]  286 	ld	a,e
   013C B7            [ 4]  287 	or	a, a
   013D 28 02         [12]  288 	jr	Z,00112$
   013F CB D1         [ 8]  289 	set	2, c
   0141                     290 00112$:
                            291 ;jdvapi_basic.c:153: if (nColor & 4) nByte |=16;
   0141 7A            [ 4]  292 	ld	a,d
   0142 B7            [ 4]  293 	or	a, a
   0143 28 02         [12]  294 	jr	Z,00114$
   0145 CB E1         [ 8]  295 	set	4, c
   0147                     296 00114$:
                            297 ;jdvapi_basic.c:154: if (nColor & 8) nByte |=1;
   0147 DD 7E FF      [19]  298 	ld	a,-1 (ix)
   014A B7            [ 4]  299 	or	a, a
   014B 28 02         [12]  300 	jr	Z,00119$
   014D CB C1         [ 8]  301 	set	0, c
   014F                     302 00119$:
                            303 ;jdvapi_basic.c:156: *pByteAddress = nByte;
   014F 71            [ 7]  304 	ld	(hl),c
   0150 DD F9         [10]  305 	ld	sp, ix
   0152 DD E1         [14]  306 	pop	ix
   0154 C9            [10]  307 	ret
                            308 ;jdvapi_basic.c:160: void put_pixel0(unsigned char nX, unsigned char nY, unsigned char nColor)
                            309 ;	---------------------------------
                            310 ; Function put_pixel0
                            311 ; ---------------------------------
   0155                     312 _put_pixel0::
   0155 DD E5         [15]  313 	push	ix
   0157 DD 21 00 00   [14]  314 	ld	ix,#0
   015B DD 39         [15]  315 	add	ix,sp
                            316 ;jdvapi_basic.c:163: unsigned int nAddress = 0xC000 + ((nY / 8) * 80) + ((nY % 8) * 2048) + (nX / 2);
   015D DD 6E 05      [19]  317 	ld	l,5 (ix)
   0160 CB 3D         [ 8]  318 	srl	l
   0162 CB 3D         [ 8]  319 	srl	l
   0164 CB 3D         [ 8]  320 	srl	l
   0166 4D            [ 4]  321 	ld	c,l
   0167 06 00         [ 7]  322 	ld	b,#0x00
   0169 69            [ 4]  323 	ld	l, c
   016A 60            [ 4]  324 	ld	h, b
   016B 29            [11]  325 	add	hl, hl
   016C 29            [11]  326 	add	hl, hl
   016D 09            [11]  327 	add	hl, bc
   016E 29            [11]  328 	add	hl, hl
   016F 29            [11]  329 	add	hl, hl
   0170 29            [11]  330 	add	hl, hl
   0171 29            [11]  331 	add	hl, hl
   0172 4D            [ 4]  332 	ld	c, l
   0173 7C            [ 4]  333 	ld	a,h
   0174 C6 C0         [ 7]  334 	add	a,#0xc0
   0176 47            [ 4]  335 	ld	b,a
   0177 DD 7E 05      [19]  336 	ld	a,5 (ix)
   017A E6 07         [ 7]  337 	and	a, #0x07
   017C 07            [ 4]  338 	rlca
   017D 07            [ 4]  339 	rlca
   017E 07            [ 4]  340 	rlca
   017F E6 F8         [ 7]  341 	and	a,#0xf8
   0181 67            [ 4]  342 	ld	h,a
   0182 2E 00         [ 7]  343 	ld	l,#0x00
   0184 79            [ 4]  344 	ld	a,c
   0185 85            [ 4]  345 	add	a, l
   0186 4F            [ 4]  346 	ld	c,a
   0187 78            [ 4]  347 	ld	a,b
   0188 8C            [ 4]  348 	adc	a, h
   0189 47            [ 4]  349 	ld	b,a
   018A DD 6E 04      [19]  350 	ld	l,4 (ix)
   018D CB 3D         [ 8]  351 	srl	l
   018F 26 00         [ 7]  352 	ld	h,#0x00
   0191 79            [ 4]  353 	ld	a,c
   0192 85            [ 4]  354 	add	a, l
   0193 4F            [ 4]  355 	ld	c,a
   0194 78            [ 4]  356 	ld	a,b
   0195 8C            [ 4]  357 	adc	a, h
   0196 47            [ 4]  358 	ld	b,a
   0197 69            [ 4]  359 	ld	l, c
   0198 60            [ 4]  360 	ld	h, b
                            361 ;jdvapi_basic.c:164: nPixel = nX % 2;
   0199 DD 7E 04      [19]  362 	ld	a,4 (ix)
   019C E6 01         [ 7]  363 	and	a, #0x01
   019E 4F            [ 4]  364 	ld	c,a
                            365 ;jdvapi_basic.c:165: set_pixel_color0((unsigned char *)nAddress, nColor, nPixel);
   019F EB            [ 4]  366 	ex	de,hl
   01A0 79            [ 4]  367 	ld	a,c
   01A1 F5            [11]  368 	push	af
   01A2 33            [ 6]  369 	inc	sp
   01A3 DD 7E 06      [19]  370 	ld	a,6 (ix)
   01A6 F5            [11]  371 	push	af
   01A7 33            [ 6]  372 	inc	sp
   01A8 D5            [11]  373 	push	de
   01A9 CDrDAr00      [17]  374 	call	_set_pixel_color0
   01AC F1            [10]  375 	pop	af
   01AD F1            [10]  376 	pop	af
   01AE DD E1         [14]  377 	pop	ix
   01B0 C9            [10]  378 	ret
                            379 ;jdvapi_basic.c:183: void copy_pixel0bytes(unsigned char nXFrom, unsigned char nYFrom,unsigned char nXTo, unsigned char nYTo, unsigned char tailleX, unsigned char tailleY)
                            380 ;	---------------------------------
                            381 ; Function copy_pixel0bytes
                            382 ; ---------------------------------
   01B1                     383 _copy_pixel0bytes::
   01B1 DD E5         [15]  384 	push	ix
   01B3 DD 21 00 00   [14]  385 	ld	ix,#0
   01B7 DD 39         [15]  386 	add	ix,sp
   01B9 F5            [11]  387 	push	af
   01BA F5            [11]  388 	push	af
                            389 ;jdvapi_basic.c:186: unsigned char * pByteAddressFrom = 0xC000 + ((nYFrom / 8) * 80) + ((nYFrom % 8) * 2048) + (nXFrom / 2);
   01BB DD 6E 05      [19]  390 	ld	l,5 (ix)
   01BE CB 3D         [ 8]  391 	srl	l
   01C0 CB 3D         [ 8]  392 	srl	l
   01C2 CB 3D         [ 8]  393 	srl	l
   01C4 4D            [ 4]  394 	ld	c,l
   01C5 06 00         [ 7]  395 	ld	b,#0x00
   01C7 69            [ 4]  396 	ld	l, c
   01C8 60            [ 4]  397 	ld	h, b
   01C9 29            [11]  398 	add	hl, hl
   01CA 29            [11]  399 	add	hl, hl
   01CB 09            [11]  400 	add	hl, bc
   01CC 29            [11]  401 	add	hl, hl
   01CD 29            [11]  402 	add	hl, hl
   01CE 29            [11]  403 	add	hl, hl
   01CF 29            [11]  404 	add	hl, hl
   01D0 4D            [ 4]  405 	ld	c, l
   01D1 7C            [ 4]  406 	ld	a,h
   01D2 C6 C0         [ 7]  407 	add	a,#0xc0
   01D4 47            [ 4]  408 	ld	b,a
   01D5 DD 7E 05      [19]  409 	ld	a,5 (ix)
   01D8 E6 07         [ 7]  410 	and	a, #0x07
   01DA 07            [ 4]  411 	rlca
   01DB 07            [ 4]  412 	rlca
   01DC 07            [ 4]  413 	rlca
   01DD E6 F8         [ 7]  414 	and	a,#0xf8
   01DF 67            [ 4]  415 	ld	h,a
   01E0 2E 00         [ 7]  416 	ld	l,#0x00
   01E2 79            [ 4]  417 	ld	a,c
   01E3 85            [ 4]  418 	add	a, l
   01E4 4F            [ 4]  419 	ld	c,a
   01E5 78            [ 4]  420 	ld	a,b
   01E6 8C            [ 4]  421 	adc	a, h
   01E7 47            [ 4]  422 	ld	b,a
   01E8 DD 6E 04      [19]  423 	ld	l,4 (ix)
   01EB CB 3D         [ 8]  424 	srl	l
   01ED 26 00         [ 7]  425 	ld	h,#0x00
   01EF 79            [ 4]  426 	ld	a,c
   01F0 85            [ 4]  427 	add	a, l
   01F1 4F            [ 4]  428 	ld	c,a
   01F2 78            [ 4]  429 	ld	a,b
   01F3 8C            [ 4]  430 	adc	a, h
   01F4 DD 71 FE      [19]  431 	ld	-2 (ix), c
   01F7 DD 77 FF      [19]  432 	ld	-1 (ix), a
                            433 ;jdvapi_basic.c:187: unsigned char * pByteAddressTo = 0xC000 + ((nYTo / 8) * 80) + ((nYTo % 8) * 2048) + (nXTo / 2);
   01FA DD 6E 07      [19]  434 	ld	l,7 (ix)
   01FD CB 3D         [ 8]  435 	srl	l
   01FF CB 3D         [ 8]  436 	srl	l
   0201 CB 3D         [ 8]  437 	srl	l
   0203 4D            [ 4]  438 	ld	c,l
   0204 06 00         [ 7]  439 	ld	b,#0x00
   0206 69            [ 4]  440 	ld	l, c
   0207 60            [ 4]  441 	ld	h, b
   0208 29            [11]  442 	add	hl, hl
   0209 29            [11]  443 	add	hl, hl
   020A 09            [11]  444 	add	hl, bc
   020B 29            [11]  445 	add	hl, hl
   020C 29            [11]  446 	add	hl, hl
   020D 29            [11]  447 	add	hl, hl
   020E 29            [11]  448 	add	hl, hl
   020F 5D            [ 4]  449 	ld	e, l
   0210 7C            [ 4]  450 	ld	a,h
   0211 C6 C0         [ 7]  451 	add	a,#0xc0
   0213 57            [ 4]  452 	ld	d,a
   0214 DD 7E 07      [19]  453 	ld	a,7 (ix)
   0217 E6 07         [ 7]  454 	and	a, #0x07
   0219 07            [ 4]  455 	rlca
   021A 07            [ 4]  456 	rlca
   021B 07            [ 4]  457 	rlca
   021C E6 F8         [ 7]  458 	and	a,#0xf8
   021E 67            [ 4]  459 	ld	h,a
   021F 2E 00         [ 7]  460 	ld	l,#0x00
   0221 7B            [ 4]  461 	ld	a,e
   0222 85            [ 4]  462 	add	a, l
   0223 5F            [ 4]  463 	ld	e,a
   0224 7A            [ 4]  464 	ld	a,d
   0225 8C            [ 4]  465 	adc	a, h
   0226 57            [ 4]  466 	ld	d,a
   0227 DD 6E 06      [19]  467 	ld	l,6 (ix)
   022A CB 3D         [ 8]  468 	srl	l
   022C 26 00         [ 7]  469 	ld	h,#0x00
   022E 7B            [ 4]  470 	ld	a,e
   022F 85            [ 4]  471 	add	a, l
   0230 5F            [ 4]  472 	ld	e,a
   0231 7A            [ 4]  473 	ld	a,d
   0232 8C            [ 4]  474 	adc	a, h
   0233 57            [ 4]  475 	ld	d,a
   0234 33            [ 6]  476 	inc	sp
   0235 33            [ 6]  477 	inc	sp
   0236 D5            [11]  478 	push	de
                            479 ;jdvapi_basic.c:188: for (x=0;x<tailleX/2;x++) {
   0237 DD 5E 08      [19]  480 	ld	e,8 (ix)
   023A CB 3B         [ 8]  481 	srl	e
   023C 16 00         [ 7]  482 	ld	d,#0x00
   023E                     483 00107$:
   023E 7A            [ 4]  484 	ld	a,d
   023F 93            [ 4]  485 	sub	a, e
   0240 30 18         [12]  486 	jr	NC,00109$
                            487 ;jdvapi_basic.c:189: for (y=0;y<tailleY;y++) {
   0242 0E 00         [ 7]  488 	ld	c,#0x00
   0244                     489 00104$:
   0244 79            [ 4]  490 	ld	a,c
   0245 DD 96 09      [19]  491 	sub	a, 9 (ix)
   0248 30 0D         [12]  492 	jr	NC,00108$
                            493 ;jdvapi_basic.c:190: *pByteAddressTo=*pByteAddressFrom;
   024A DD 6E FE      [19]  494 	ld	l,-2 (ix)
   024D DD 66 FF      [19]  495 	ld	h,-1 (ix)
   0250 7E            [ 7]  496 	ld	a,(hl)
   0251 E1            [10]  497 	pop	hl
   0252 E5            [11]  498 	push	hl
   0253 77            [ 7]  499 	ld	(hl),a
                            500 ;jdvapi_basic.c:189: for (y=0;y<tailleY;y++) {
   0254 0C            [ 4]  501 	inc	c
   0255 18 ED         [12]  502 	jr	00104$
   0257                     503 00108$:
                            504 ;jdvapi_basic.c:188: for (x=0;x<tailleX/2;x++) {
   0257 14            [ 4]  505 	inc	d
   0258 18 E4         [12]  506 	jr	00107$
   025A                     507 00109$:
   025A DD F9         [10]  508 	ld	sp, ix
   025C DD E1         [14]  509 	pop	ix
   025E C9            [10]  510 	ret
                            511 ;jdvapi_basic.c:195: void set_pixel_color1(unsigned char *pByteAddress, unsigned char nColor, unsigned char nPixel)
                            512 ;	---------------------------------
                            513 ; Function set_pixel_color1
                            514 ; ---------------------------------
   025F                     515 _set_pixel_color1::
   025F DD E5         [15]  516 	push	ix
   0261 DD 21 00 00   [14]  517 	ld	ix,#0
   0265 DD 39         [15]  518 	add	ix,sp
                            519 ;jdvapi_basic.c:197: unsigned char nByte = *pByteAddress;
   0267 DD 6E 04      [19]  520 	ld	l,4 (ix)
   026A DD 66 05      [19]  521 	ld	h,5 (ix)
   026D 4E            [ 7]  522 	ld	c,(hl)
                            523 ;jdvapi_basic.c:200: if (nColor & 1) nByte |=128; //1000 0000
   026E DD 7E 06      [19]  524 	ld	a,6 (ix)
   0271 E6 01         [ 7]  525 	and	a, #0x01
   0273 47            [ 4]  526 	ld	b,a
                            527 ;jdvapi_basic.c:201: if (nColor & 2) nByte |=8;   //0000 1000
   0274 DD 7E 06      [19]  528 	ld	a,6 (ix)
   0277 E6 02         [ 7]  529 	and	a, #0x02
   0279 5F            [ 4]  530 	ld	e,a
                            531 ;jdvapi_basic.c:198: if (nPixel == 0) {
   027A DD 7E 07      [19]  532 	ld	a,7 (ix)
   027D B7            [ 4]  533 	or	a, a
   027E 20 12         [12]  534 	jr	NZ,00124$
                            535 ;jdvapi_basic.c:199: nByte&=119;                  //0111 0111
   0280 79            [ 4]  536 	ld	a,c
   0281 E6 77         [ 7]  537 	and	a, #0x77
   0283 57            [ 4]  538 	ld	d,a
                            539 ;jdvapi_basic.c:200: if (nColor & 1) nByte |=128; //1000 0000
   0284 78            [ 4]  540 	ld	a,b
   0285 B7            [ 4]  541 	or	a, a
   0286 28 02         [12]  542 	jr	Z,00102$
   0288 CB FA         [ 8]  543 	set	7, d
   028A                     544 00102$:
                            545 ;jdvapi_basic.c:201: if (nColor & 2) nByte |=8;   //0000 1000
   028A 7B            [ 4]  546 	ld	a,e
   028B B7            [ 4]  547 	or	a, a
   028C 28 45         [12]  548 	jr	Z,00125$
   028E CB DA         [ 8]  549 	set	3, d
   0290 18 41         [12]  550 	jr	00125$
   0292                     551 00124$:
                            552 ;jdvapi_basic.c:202: } else if (nPixel == 1) {
   0292 DD 7E 07      [19]  553 	ld	a,7 (ix)
   0295 3D            [ 4]  554 	dec	a
   0296 20 12         [12]  555 	jr	NZ,00121$
                            556 ;jdvapi_basic.c:203: nByte&=187;                  //1011 1011
   0298 79            [ 4]  557 	ld	a,c
   0299 E6 BB         [ 7]  558 	and	a, #0xbb
   029B 57            [ 4]  559 	ld	d,a
                            560 ;jdvapi_basic.c:204: if (nColor & 1) nByte |=64;  //0100 0000
   029C 78            [ 4]  561 	ld	a,b
   029D B7            [ 4]  562 	or	a, a
   029E 28 02         [12]  563 	jr	Z,00106$
   02A0 CB F2         [ 8]  564 	set	6, d
   02A2                     565 00106$:
                            566 ;jdvapi_basic.c:205: if (nColor & 2) nByte |=4;   //0000 0100
   02A2 7B            [ 4]  567 	ld	a,e
   02A3 B7            [ 4]  568 	or	a, a
   02A4 28 2D         [12]  569 	jr	Z,00125$
   02A6 CB D2         [ 8]  570 	set	2, d
   02A8 18 29         [12]  571 	jr	00125$
   02AA                     572 00121$:
                            573 ;jdvapi_basic.c:206: } else if (nPixel == 2) {
   02AA DD 7E 07      [19]  574 	ld	a,7 (ix)
   02AD D6 02         [ 7]  575 	sub	a, #0x02
   02AF 20 12         [12]  576 	jr	NZ,00118$
                            577 ;jdvapi_basic.c:207: nByte&=221;                  //1101 1101
   02B1 79            [ 4]  578 	ld	a,c
   02B2 E6 DD         [ 7]  579 	and	a, #0xdd
   02B4 57            [ 4]  580 	ld	d,a
                            581 ;jdvapi_basic.c:208: if (nColor & 1) nByte |=32;  //0010 0000
   02B5 78            [ 4]  582 	ld	a,b
   02B6 B7            [ 4]  583 	or	a, a
   02B7 28 02         [12]  584 	jr	Z,00110$
   02B9 CB EA         [ 8]  585 	set	5, d
   02BB                     586 00110$:
                            587 ;jdvapi_basic.c:209: if (nColor & 2) nByte |=2;   //0000 0010
   02BB 7B            [ 4]  588 	ld	a,e
   02BC B7            [ 4]  589 	or	a, a
   02BD 28 14         [12]  590 	jr	Z,00125$
   02BF CB CA         [ 8]  591 	set	1, d
   02C1 18 10         [12]  592 	jr	00125$
   02C3                     593 00118$:
                            594 ;jdvapi_basic.c:211: nByte&=238;                  //1110 1110
   02C3 79            [ 4]  595 	ld	a,c
   02C4 E6 EE         [ 7]  596 	and	a, #0xee
   02C6 57            [ 4]  597 	ld	d,a
                            598 ;jdvapi_basic.c:212: if (nColor & 1) nByte |=16;  //0001 0000
   02C7 78            [ 4]  599 	ld	a,b
   02C8 B7            [ 4]  600 	or	a, a
   02C9 28 02         [12]  601 	jr	Z,00114$
   02CB CB E2         [ 8]  602 	set	4, d
   02CD                     603 00114$:
                            604 ;jdvapi_basic.c:213: if (nColor & 2) nByte |=1;   //0000 0001
   02CD 7B            [ 4]  605 	ld	a,e
   02CE B7            [ 4]  606 	or	a, a
   02CF 28 02         [12]  607 	jr	Z,00125$
   02D1 CB C2         [ 8]  608 	set	0, d
   02D3                     609 00125$:
                            610 ;jdvapi_basic.c:216: *pByteAddress = nByte;
   02D3 72            [ 7]  611 	ld	(hl),d
   02D4 DD E1         [14]  612 	pop	ix
   02D6 C9            [10]  613 	ret
                            614 ;jdvapi_basic.c:220: void put_pixel1(unsigned char nX, unsigned char nY, unsigned char nColor)
                            615 ;	---------------------------------
                            616 ; Function put_pixel1
                            617 ; ---------------------------------
   02D7                     618 _put_pixel1::
   02D7 DD E5         [15]  619 	push	ix
   02D9 DD 21 00 00   [14]  620 	ld	ix,#0
   02DD DD 39         [15]  621 	add	ix,sp
                            622 ;jdvapi_basic.c:223: unsigned int nAddress = 0xC000 + ((nY / 8) * 80) + ((nY % 8) * 2048) + (nX / 4);
   02DF DD 6E 05      [19]  623 	ld	l,5 (ix)
   02E2 CB 3D         [ 8]  624 	srl	l
   02E4 CB 3D         [ 8]  625 	srl	l
   02E6 CB 3D         [ 8]  626 	srl	l
   02E8 4D            [ 4]  627 	ld	c,l
   02E9 06 00         [ 7]  628 	ld	b,#0x00
   02EB 69            [ 4]  629 	ld	l, c
   02EC 60            [ 4]  630 	ld	h, b
   02ED 29            [11]  631 	add	hl, hl
   02EE 29            [11]  632 	add	hl, hl
   02EF 09            [11]  633 	add	hl, bc
   02F0 29            [11]  634 	add	hl, hl
   02F1 29            [11]  635 	add	hl, hl
   02F2 29            [11]  636 	add	hl, hl
   02F3 29            [11]  637 	add	hl, hl
   02F4 4D            [ 4]  638 	ld	c, l
   02F5 7C            [ 4]  639 	ld	a,h
   02F6 C6 C0         [ 7]  640 	add	a,#0xc0
   02F8 47            [ 4]  641 	ld	b,a
   02F9 DD 7E 05      [19]  642 	ld	a,5 (ix)
   02FC E6 07         [ 7]  643 	and	a, #0x07
   02FE 07            [ 4]  644 	rlca
   02FF 07            [ 4]  645 	rlca
   0300 07            [ 4]  646 	rlca
   0301 E6 F8         [ 7]  647 	and	a,#0xf8
   0303 67            [ 4]  648 	ld	h,a
   0304 2E 00         [ 7]  649 	ld	l,#0x00
   0306 79            [ 4]  650 	ld	a,c
   0307 85            [ 4]  651 	add	a, l
   0308 4F            [ 4]  652 	ld	c,a
   0309 78            [ 4]  653 	ld	a,b
   030A 8C            [ 4]  654 	adc	a, h
   030B 47            [ 4]  655 	ld	b,a
   030C DD 6E 04      [19]  656 	ld	l,4 (ix)
   030F CB 3D         [ 8]  657 	srl	l
   0311 CB 3D         [ 8]  658 	srl	l
   0313 26 00         [ 7]  659 	ld	h,#0x00
   0315 79            [ 4]  660 	ld	a,c
   0316 85            [ 4]  661 	add	a, l
   0317 4F            [ 4]  662 	ld	c,a
   0318 78            [ 4]  663 	ld	a,b
   0319 8C            [ 4]  664 	adc	a, h
   031A 47            [ 4]  665 	ld	b,a
   031B 69            [ 4]  666 	ld	l, c
   031C 60            [ 4]  667 	ld	h, b
                            668 ;jdvapi_basic.c:224: nPixel = nX % 4;
   031D DD 7E 04      [19]  669 	ld	a,4 (ix)
   0320 E6 03         [ 7]  670 	and	a, #0x03
   0322 4F            [ 4]  671 	ld	c,a
                            672 ;jdvapi_basic.c:225: set_pixel_color1((unsigned char *)nAddress, nColor, nPixel);
   0323 EB            [ 4]  673 	ex	de,hl
   0324 79            [ 4]  674 	ld	a,c
   0325 F5            [11]  675 	push	af
   0326 33            [ 6]  676 	inc	sp
   0327 DD 7E 06      [19]  677 	ld	a,6 (ix)
   032A F5            [11]  678 	push	af
   032B 33            [ 6]  679 	inc	sp
   032C D5            [11]  680 	push	de
   032D CDr5Fr02      [17]  681 	call	_set_pixel_color1
   0330 F1            [10]  682 	pop	af
   0331 F1            [10]  683 	pop	af
   0332 DD E1         [14]  684 	pop	ix
   0334 C9            [10]  685 	ret
                            686 ;jdvapi_basic.c:246: void put_pixel_byte1(unsigned char nX, unsigned char nY, unsigned char nColor0123)
                            687 ;	---------------------------------
                            688 ; Function put_pixel_byte1
                            689 ; ---------------------------------
   0335                     690 _put_pixel_byte1::
   0335 DD E5         [15]  691 	push	ix
   0337 DD 21 00 00   [14]  692 	ld	ix,#0
   033B DD 39         [15]  693 	add	ix,sp
                            694 ;jdvapi_basic.c:248: unsigned char nByte=0;
   033D 0E 00         [ 7]  695 	ld	c,#0x00
                            696 ;jdvapi_basic.c:249: unsigned char * pByteAddress = 0xC000 + ((nY / 8) * 80) + ((nY % 8) * 2048) + (nX / 4);
   033F DD 6E 05      [19]  697 	ld	l,5 (ix)
   0342 CB 3D         [ 8]  698 	srl	l
   0344 CB 3D         [ 8]  699 	srl	l
   0346 CB 3D         [ 8]  700 	srl	l
   0348 5D            [ 4]  701 	ld	e,l
   0349 16 00         [ 7]  702 	ld	d,#0x00
   034B 6B            [ 4]  703 	ld	l, e
   034C 62            [ 4]  704 	ld	h, d
   034D 29            [11]  705 	add	hl, hl
   034E 29            [11]  706 	add	hl, hl
   034F 19            [11]  707 	add	hl, de
   0350 29            [11]  708 	add	hl, hl
   0351 29            [11]  709 	add	hl, hl
   0352 29            [11]  710 	add	hl, hl
   0353 29            [11]  711 	add	hl, hl
   0354 5D            [ 4]  712 	ld	e, l
   0355 7C            [ 4]  713 	ld	a,h
   0356 C6 C0         [ 7]  714 	add	a,#0xc0
   0358 57            [ 4]  715 	ld	d,a
   0359 DD 7E 05      [19]  716 	ld	a,5 (ix)
   035C E6 07         [ 7]  717 	and	a, #0x07
   035E 07            [ 4]  718 	rlca
   035F 07            [ 4]  719 	rlca
   0360 07            [ 4]  720 	rlca
   0361 E6 F8         [ 7]  721 	and	a,#0xf8
   0363 67            [ 4]  722 	ld	h,a
   0364 2E 00         [ 7]  723 	ld	l,#0x00
   0366 7B            [ 4]  724 	ld	a,e
   0367 85            [ 4]  725 	add	a, l
   0368 5F            [ 4]  726 	ld	e,a
   0369 7A            [ 4]  727 	ld	a,d
   036A 8C            [ 4]  728 	adc	a, h
   036B 57            [ 4]  729 	ld	d,a
   036C DD 6E 04      [19]  730 	ld	l,4 (ix)
   036F CB 3D         [ 8]  731 	srl	l
   0371 CB 3D         [ 8]  732 	srl	l
   0373 26 00         [ 7]  733 	ld	h,#0x00
   0375 7B            [ 4]  734 	ld	a,e
   0376 85            [ 4]  735 	add	a, l
   0377 5F            [ 4]  736 	ld	e,a
   0378 7A            [ 4]  737 	ld	a,d
   0379 8C            [ 4]  738 	adc	a, h
   037A 57            [ 4]  739 	ld	d,a
                            740 ;jdvapi_basic.c:250: switch(nColor0123) {
   037B 3E 03         [ 7]  741 	ld	a,#0x03
   037D DD 96 06      [19]  742 	sub	a, 6 (ix)
   0380 38 23         [12]  743 	jr	C,00105$
   0382 D5            [11]  744 	push	de
   0383 DD 5E 06      [19]  745 	ld	e,6 (ix)
   0386 16 00         [ 7]  746 	ld	d,#0x00
   0388 21r8Fr03      [10]  747 	ld	hl,#00112$
   038B 19            [11]  748 	add	hl,de
   038C 19            [11]  749 	add	hl,de
                            750 ;jdvapi_basic.c:251: case 0 :
   038D D1            [10]  751 	pop	de
   038E E9            [ 4]  752 	jp	(hl)
   038F                     753 00112$:
   038F 18 06         [12]  754 	jr	00101$
   0391 18 08         [12]  755 	jr	00102$
   0393 18 0A         [12]  756 	jr	00103$
   0395 18 0C         [12]  757 	jr	00104$
   0397                     758 00101$:
                            759 ;jdvapi_basic.c:252: nByte=0;
   0397 0E 00         [ 7]  760 	ld	c,#0x00
                            761 ;jdvapi_basic.c:253: break;
   0399 18 0A         [12]  762 	jr	00105$
                            763 ;jdvapi_basic.c:254: case 1 :
   039B                     764 00102$:
                            765 ;jdvapi_basic.c:255: nByte=240;
   039B 0E F0         [ 7]  766 	ld	c,#0xf0
                            767 ;jdvapi_basic.c:256: break;
   039D 18 06         [12]  768 	jr	00105$
                            769 ;jdvapi_basic.c:257: case 2 :
   039F                     770 00103$:
                            771 ;jdvapi_basic.c:258: nByte=15;
   039F 0E 0F         [ 7]  772 	ld	c,#0x0f
                            773 ;jdvapi_basic.c:259: break;
   03A1 18 02         [12]  774 	jr	00105$
                            775 ;jdvapi_basic.c:260: case 3 :
   03A3                     776 00104$:
                            777 ;jdvapi_basic.c:261: nByte=255;
   03A3 0E FF         [ 7]  778 	ld	c,#0xff
                            779 ;jdvapi_basic.c:263: }
   03A5                     780 00105$:
                            781 ;jdvapi_basic.c:265: *pByteAddress = nByte;
   03A5 79            [ 4]  782 	ld	a,c
   03A6 12            [ 7]  783 	ld	(de),a
   03A7 DD E1         [14]  784 	pop	ix
   03A9 C9            [10]  785 	ret
                            786 	.area _CODE
                            787 	.area _INITIALIZER
                            788 	.area _CABS (ABS)
